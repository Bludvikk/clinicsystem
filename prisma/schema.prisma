generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Patient {
  id                 String              @id @default(uuid())
  firstName          String
  lastName           String
  middleInitial      String?             @default("N/A")
  address            String
  dateOfBirth        DateTime
  civilStatus        String
  age                Int
  occupation         String              @default("N/A")
  gender             String
  contactNumber      String              @default("N/A")
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  familyHistory      FamilyHistory?
  obGyne             ObGyne?
  pastMedicalHistory PastMedicalHistory?
  personalHistory    PersonalHistory?
}

model FamilyHistory {
  id                      String  @id @default(uuid())
  isBronchialAsthma       Boolean @default(false)
  isPulmonaryTuberculosis Boolean @default(false)
  isHypertension          Boolean @default(false)
  isDiabetesMellitus      Boolean @default(false)
  isHearthDisease         Boolean @default(false)
  isCancer                Boolean @default(false)
  others                  String?
  patientId               String  @unique
  Patient                 Patient @relation(fields: [patientId], references: [id], onDelete: Cascade)
}

model PersonalHistory {
  id                     String   @id @default(uuid())
  isSmoking              String[]
  isAlcohol             String[]
  currentHealthCondition String
  medications            Json?
  patientId              String   @unique
  Patient                Patient  @relation(fields: [patientId], references: [id], onDelete: Cascade)
}

model PastMedicalHistory {
  id             String   @id @default(uuid())
  isHospitalized String[]
  isInjuries     String[]
  isSurgeries    String[]
  isAllergies    String[]
  isMeasles      String[]
  isChickenPox   String[]
  others         String?
  patientId      String   @unique
  Patient        Patient  @relation(fields: [patientId], references: [id], onDelete: Cascade)
}

model ObGyne {
  id             String    @id @default(uuid())
  menstrualCycle DateTime?
  days           Int?
  patientId      String    @unique
  Patient        Patient   @relation(fields: [patientId], references: [id], onDelete: Cascade)
}
